# ü§ñ LLM Integration Guide - DocMentor 2.1

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ LLM —Å GGUF –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤–æ–≥–æ –º–æ–¥–µ–ª–∏ –≤ DocMentor –¥–ª—è MacBook M4.

---

## üìã –û–±–∑–æ—Ä

DocMentor 2.1 –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é **–ª–æ–∫–∞–ª—å–Ω–æ–≥–æ LLM** (Large Language Model) –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –≤—Å–µ –Ω–∞ —Ç–≤–æ–µ–º MacBook M4, –Ω–∏–∫–∞–∫–∏—Ö API –∫–ª—é—á–µ–π
- ‚úÖ **GGUF –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è** - Q4_K_M –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –∫–∞—á–µ—Å—Ç–≤–æ/—Å–∫–æ—Ä–æ—Å—Ç—å
- ‚úÖ **Metal acceleration** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPU M4 –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- ‚úÖ **RAG Pipeline** - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ —É—á–µ–±–Ω–∏–∫–æ–≤ + AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- ‚úÖ **–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –ø—Ä–æ–º–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ **–†—É—Å—Å–∫–∏–π —è–∑—ã–∫** - –æ—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —á–µ—Ä–µ–∑ Qwen2.5

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
python setup_llm.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç `llama-cpp-python` (—Å Metal support)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç `huggingface-hub` –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π
3. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç —Å–∫–∞—á–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—É—é –º–æ–¥–µ–ª—å

### –®–∞–≥ 2: –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `setup_llm.py` —Ç–µ–±–µ –ø—Ä–µ–¥–ª–æ–∂–∞—Ç 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞:

**1. Qwen2.5-7B-Instruct** (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
- –†–∞–∑–º–µ—Ä: 4.5 GB
- –†—É—Å—Å–∫–∏–π: –û—Ç–ª–∏—á–Ω–æ
- –°–∫–æ—Ä–æ—Å—Ç—å: 25-35 —Ç–æ–∫–µ–Ω–æ–≤/—Å–µ–∫ –Ω–∞ M4
- –û–ø–∏—Å–∞–Ω–∏–µ: –õ—É—á—à–∏–π –±–∞–ª–∞–Ω—Å –¥–ª—è MacBook M4 16GB

**2. Qwen2.5-3B-Instruct** (–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å)
- –†–∞–∑–º–µ—Ä: 2.0 GB
- –†—É—Å—Å–∫–∏–π: –û—Ç–ª–∏—á–Ω–æ
- –°–∫–æ—Ä–æ—Å—Ç—å: 40-60 —Ç–æ–∫–µ–Ω–æ–≤/—Å–µ–∫
- –û–ø–∏—Å–∞–Ω–∏–µ: –õ–µ–≥–∫–∞—è –≤–µ—Ä—Å–∏—è, –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è

**3. OpenBioLLM-8B** (–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
- –†–∞–∑–º–µ—Ä: 5.0 GB
- –†—É—Å—Å–∫–∏–π: –°–ª–∞–±–µ–µ
- –°–∫–æ—Ä–æ—Å—Ç—å: 20-28 —Ç–æ–∫–µ–Ω–æ–≤/—Å–µ–∫
- –û–ø–∏—Å–∞–Ω–∏–µ: –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ–±—É—á–µ–Ω–∞ –Ω–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python test_llm.py
```

–ó–∞–ø—É—Å—Ç–∏—Ç 6 —Ç–µ—Å—Ç–æ–≤:
1. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
2. ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
3. ‚úÖ –ß–∞—Ç —Ñ–æ—Ä–º–∞—Ç
4. ‚úÖ –ü—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω—ã
5. ‚úÖ RAG Pipeline
6. ‚úÖ –ë–µ–Ω—á–º–∞—Ä–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from core import DocMentorCore

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å LLM
docmentor = DocMentorCore(
    storage_path="./data",
    llm_model_path="./models/qwen2.5-7b-instruct-q4_k_m.gguf",
    enable_llm=True
)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å LLM
if docmentor.is_llm_available():
    print("‚úÖ LLM –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
```

### –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å —Å RAG

```python
# –í–æ–ø—Ä–æ—Å —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ —É—á–µ–±–Ω–∏–∫–æ–≤
result = docmentor.ask_ai(
    question="–ß—Ç–æ —Ç–∞–∫–æ–µ –±—Ä–æ–Ω—Ö–∏–∞–ª—å–Ω–∞—è –∞—Å—Ç–º–∞?",
    use_context=True,  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—á–µ–±–Ω–∏–∫–∏
    max_tokens=512,
    temperature=0.7
)

if result["status"] == "success":
    print(f"–û—Ç–≤–µ—Ç: {result['answer']}")
    print(f"–ò—Å—Ç–æ—á–Ω–∏–∫–∏: {len(result['sources'])} —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤")
    print(f"–í—Ä–µ–º—è: {result['metadata']['time_seconds']:.2f}s")
```

### –û–±—ä—è—Å–Ω–∏—Ç—å —Ç–µ—Ä–º–∏–Ω

```python
# –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞
result = docmentor.explain_term("–¢–∞—Ö–∏–∫–∞—Ä–¥–∏—è")

if result["status"] == "success":
    print(result["explanation"])
```

### –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ RAG Pipeline

```python
# –î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
from core.llm import PromptTemplates

# –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
symptoms = ["–ë–æ–ª—å –≤ –≥—Ä—É–¥–∏", "–û–¥—ã—à–∫–∞", "–ü–æ—Ç–ª–∏–≤–æ—Å—Ç—å"]

result = docmentor.rag_pipeline.differential_diagnosis(symptoms)

if result["status"] == "success":
    print(result["diagnosis"])
```

---

## üé® –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Streamlit UI

–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `app/Home.py` –±—É–¥–µ—Ç –≤–∫–ª—é—á–∞—Ç—å:

```python
import streamlit as st
from core import DocMentorCore

# Initialize with LLM
if 'docmentor' not in st.session_state:
    st.session_state.docmentor = DocMentorCore(
        storage_path="./data",
        enable_llm=True  # Auto-detect model
    )

# AI Mode toggle
use_ai = st.toggle("ü§ñ AI —Ä–µ–∂–∏–º", value=True)

if user_question:
    if use_ai and st.session_state.docmentor.is_llm_available():
        # AI answer
        result = st.session_state.docmentor.ask_ai(user_question)
        st.markdown(result["answer"])
    else:
        # Simple vector search
        results = st.session_state.docmentor.search(user_question)
        # Display chunks...
```

---

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
core/llm/
‚îú‚îÄ‚îÄ __init__.py              # –≠–∫—Å–ø–æ—Ä—Ç—ã
‚îú‚îÄ‚îÄ llm_manager.py           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—å—é (–∑–∞–≥—Ä—É–∑–∫–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ prompt_templates.py      # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—ã
‚îú‚îÄ‚îÄ rag_pipeline.py          # RAG: –ø–æ–∏—Å–∫ + –∫–æ–Ω—Ç–µ–∫—Å—Ç + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ model_downloader.py      # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
```

### RAG Pipeline Flow

```
1. –°—Ç—É–¥–µ–Ω—Ç –∑–∞–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å
   ‚Üì
2. –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ ‚Üí —Ç–æ–ø-K —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∏–∑ —É—á–µ–±–Ω–∏–∫–æ–≤
   ‚Üì
3. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞: system + –∫–æ–Ω—Ç–µ–∫—Å—Ç + –≤–æ–ø—Ä–æ—Å
   ‚Üì
4. LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí —É–º–Ω—ã–π –æ—Ç–≤–µ—Ç
   ‚Üì
5. –í–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞ + –∏—Å—Ç–æ—á–Ω–∏–∫–∏ + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
```

### –ü—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω—ã

**1. Question Answering** (`question_answering`)
- –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

**2. Term Explanation** (`explain_term`)
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤

**3. Differential Diagnosis** (`differential_diagnosis`)
- –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ —Å–∏–º–ø—Ç–æ–º–∞–º

**4. Virtual Patient** (`virtual_patient_response`)
- –°–∏–º—É–ª—è—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞ —Å –ø–∞—Ü–∏–µ–Ω—Ç–æ–º

**5. Answer Checking** (`check_answer`)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –Ω–∞ –æ—Ç–≤–µ—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–∞

---

## ‚öôÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è M4

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```python
llm = LLMManager(
    model_path="models/qwen2.5-7b-instruct-q4_k_m.gguf",
    n_ctx=4096,        # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–∫–Ω–æ
    n_threads=8,       # M4 –∏–º–µ–µ—Ç 10 —è–¥–µ—Ä (8 –¥–ª—è LLM)
    use_metal=True,    # GPU acceleration
    temperature=0.7,   # –ë–∞–ª–∞–Ω—Å –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å/—Ç–æ—á–Ω–æ—Å—Ç—å
    max_tokens=512     # –î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞
)
```

### –ö–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **Q4_K_M** –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—é:
- **Q4** = 4-bit weights (–º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä, –±—ã—Å—Ç—Ä–µ–µ)
- **K_M** = K-quants medium (—Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–∞–Ω—Å)

–î—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
- `Q5_K_M` - —á—É—Ç—å –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ, –º–µ–¥–ª–µ–Ω–Ω–µ–µ
- `Q8_0` - –ø–æ—á—Ç–∏ –∫–∞–∫ fp16, –Ω–æ –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä
- `Q2_K` - –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è, –Ω–æ –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

### –û–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**MacBook Air M4 16GB:**

| –ú–æ–¥–µ–ª—å | –†–∞–∑–º–µ—Ä | RAM Usage | –°–∫–æ—Ä–æ—Å—Ç—å | –ö–∞—á–µ—Å—Ç–≤–æ |
|--------|--------|-----------|----------|----------|
| Qwen2.5-3B Q4 | 2 GB | ~3.5 GB | 40-60 t/s | –•–æ—Ä–æ—à–µ–µ |
| Qwen2.5-7B Q4 | 4.5 GB | ~6 GB | 25-35 t/s | –û—Ç–ª–∏—á–Ω–æ–µ |
| OpenBioLLM-8B Q4 | 5 GB | ~7 GB | 20-28 t/s | –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ |

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ LLM

```python
# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
stats = docmentor.get_llm_stats()

print(f"–í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: {stats['total_requests']}")
print(f"–¢–æ–∫–µ–Ω–æ–≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: {stats['total_tokens_generated']}")
print(f"–°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å: {stats['average_tokens_per_second']:.1f} t/s")
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import logging

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger("core.llm")
```

–£–≤–∏–¥–∏—à—å:
```
INFO - Model loaded successfully!
INFO - Context window: 4096
INFO - Threads: 8
INFO - Metal acceleration: True
INFO - Generated 150 tokens in 5.2s (28.8 t/s)
```

---

## ‚ùì FAQ

### –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –º–µ–∂–¥—É Qwen –∏ OpenBioLLM?

**Qwen2.5-7B** –µ—Å–ª–∏:
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫
- ‚úÖ –ù—É–∂–Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –•–æ—á–µ—à—å –ª—É—á—à–∏–π –±–∞–ª–∞–Ω—Å

**OpenBioLLM-8B** –µ—Å–ª–∏:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—à—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- ‚úÖ –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –ì–æ—Ç–æ–≤ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å —Ä—É—Å—Å–∫–∏–º

### –°–∫–æ–ª—å–∫–æ RAM –Ω—É–∂–Ω–æ?

–ú–∏–Ω–∏–º—É–º:
- **8 GB** - Qwen2.5-3B
- **16 GB** - Qwen2.5-7B (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **16 GB+** - OpenBioLLM-8B

### –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPU?

–î–∞! `use_metal=True` –≤–∫–ª—é—á–∞–µ—Ç Metal acceleration –Ω–∞ Apple Silicon.

–ü—Ä–æ–≤–µ—Ä—å –≤ –ª–æ–≥–∞—Ö:
```
n_gpu_layers: 99  # –í—Å–µ —Å–ª–æ–∏ –Ω–∞ GPU
```

### –ú–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ?

1. –ü–æ–ø—Ä–æ–±—É–π Qwen2.5-3B (–ª–µ–≥—á–µ)
2. –£–º–µ–Ω—å—à–∏ `n_ctx` (–º–µ–Ω—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç)
3. –£–º–µ–Ω—å—à–∏ `max_tokens` (–∫–æ—Ä–æ—á–µ –æ—Ç–≤–µ—Ç—ã)
4. –ü—Ä–æ–≤–µ—Ä—å `use_metal=True`

### –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å?

```bash
# –°–∫–∞—á–∞–π –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å
python setup_llm.py

# –£–∫–∞–∂–∏ –ø—É—Ç—å –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
docmentor = DocMentorCore(
    llm_model_path="./models/–Ω–æ–≤–∞—è-–º–æ–¥–µ–ª—å.gguf"
)
```

---

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:

**Phase 4.1: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã**
- [ ] –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (–ü–µ–¥–∏–∞—Ç—Ä–∏—è, –¢–µ—Ä–∞–ø–∏—è, –•–∏—Ä—É—Ä–≥–∏—è)
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**Phase 4.2: Fine-tuning**
- [ ] –§–∞–π–Ω—Ç—é–Ω–∏–Ω–≥ –Ω–∞ —Ä—É—Å—Å–∫–∏—Ö –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏–∑ —É—á–µ–±–Ω–∏–∫–æ–≤
- [ ] LoRA –∞–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π

**Phase 4.3: Multimodal**
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è LLaVA –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ–Ω—Ç–≥–µ–Ω–æ–≤, –ö–¢, –ú–†–¢

---

## üìö –†–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [llama.cpp](https://github.com/ggerganov/llama.cpp) - C++ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- [llama-cpp-python](https://github.com/abetlen/llama-cpp-python) - Python –±–∏–Ω–¥–∏–Ω–≥–∏
- [Qwen2.5](https://github.com/QwenLM/Qwen2.5) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–∏
- [GGUF Format](https://github.com/ggerganov/ggml/blob/master/docs/gguf.md) - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞

### HuggingFace Repos

- [Qwen2.5-7B-Instruct-GGUF](https://huggingface.co/Qwen/Qwen2.5-7B-Instruct-GGUF)
- [Qwen2.5-3B-Instruct-GGUF](https://huggingface.co/Qwen/Qwen2.5-3B-Instruct-GGUF)
- [OpenBioLLM-8B-GGUF](https://huggingface.co/aaditya/OpenBioLLM-Llama3-8B-GGUF)

---

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `python test_llm.py`
2. GitHub Issues: [DocMentor/issues](https://github.com/TemurTurayev/DocMentor/issues)
3. Telegram: [@Turayev_Temur](https://t.me/Turayev_Temur)

---

**–í–µ—Ä—Å–∏—è:** 2.1.0
**–î–∞—Ç–∞:** –î–µ–∫–∞–±—Ä—å 2024
**–ê–≤—Ç–æ—Ä:** Temur Turayev
**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è:** MacBook M4 16GB
